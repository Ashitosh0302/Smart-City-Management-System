<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Nearby - Find Houses for Rent & Sale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .property-finder-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            margin-bottom: 40px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .location-selector {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .location-option {
            flex: 1;
            min-width: 200px;
        }
        
        .location-option h3 {
            margin-bottom: 15px;
            color: #2d3748;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .gps-button {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .gps-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(139, 69, 19, 0.4);
        }
        
        .gps-button .icon {
            font-size: 1.5rem;
        }
        
        .search-button {
            background: linear-gradient(135deg, #228B22 0%, #32CD32 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 30px;
        }
        
        .search-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(34, 139, 34, 0.4);
        }
        
        .location-display {
            background: linear-gradient(135deg, #FAF0E6 0%, #FFF8DC 100%);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
        }
        
        .location-display.active {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .location-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .location-detail {
            display: flex;
            flex-direction: column;
        }
        
        .location-label {
            font-size: 0.9rem;
            color: #4a5568;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .location-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #8B4513;
        }
        
        .filter-section {
            margin: 30px 0;
        }
        
        .filter-header {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .property-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .property-type-btn {
            padding: 15px 30px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .property-type-btn:hover {
            border-color: #8B4513;
            transform: translateY(-2px);
        }
        
        .property-type-btn.active {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            border-color: #8B4513;
        }
        
        .transaction-type {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 12px;
        }
        
        .transaction-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .transaction-option input {
            width: 20px;
            height: 20px;
            accent-color: #8B4513;
        }
        
        .transaction-label {
            font-weight: 600;
            color: #2d3748;
            font-size: 1.1rem;
        }
        
        .price-range-filter {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
            padding: 25px;
            background: #f7fafc;
            border-radius: 12px;
        }
        
        .price-input-group {
            display: flex;
            flex-direction: column;
        }
        
        .price-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .price-input {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
        }
        
        .price-input:focus {
            outline: none;
            border-color: #8B4513;
        }
        
        .bedroom-filter {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 12px;
            flex-wrap: wrap;
        }
        
        .bedroom-btn {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 70px;
            text-align: center;
        }
        
        .bedroom-btn:hover {
            border-color: #8B4513;
        }
        
        .bedroom-btn.active {
            background: #8B4513;
            color: white;
            border-color: #8B4513;
        }
        
        .features-filter {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .feature-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .feature-checkbox:hover {
            background: #FAF0E6;
            transform: translateY(-2px);
        }
        
        .feature-checkbox input {
            width: 20px;
            height: 20px;
            accent-color: #8B4513;
        }
        
        .feature-label {
            font-weight: 500;
            color: #2d3748;
        }
        
        .distance-filter {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 12px;
        }
        
        .distance-slider {
            flex: 1;
        }
        
        .distance-label {
            font-weight: 600;
            color: #2d3748;
            min-width: 150px;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #cbd5e0;
            border-radius: 4px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #8B4513;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        .distance-value {
            font-weight: 700;
            color: #8B4513;
            min-width: 60px;
            text-align: right;
        }
        
        .results-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            margin-bottom: 40px;
            display: none;
        }
        
        .results-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #e2e8f0;
        }
        
        .results-title {
            font-size: 1.8rem;
            color: #2d3748;
            font-weight: 700;
        }
        
        .results-count {
            background: #8B4513;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .property-card {
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            background: white;
            position: relative;
        }
        
        .property-card:hover {
            border-color: #8B4513;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .property-image {
            height: 220px;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            position: relative;
            overflow: hidden;
        }
        
        .property-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0,0,0,0.2), transparent);
        }
        
        .property-type-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.9);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #8B4513;
        }
        
        .property-status {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #228B22;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .property-status.rent {
            background: #4169E1;
        }
        
        .property-content {
            padding: 25px;
        }
        
        .property-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .property-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .property-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #228B22;
            background: #F0FFF0;
            padding: 5px 15px;
            border-radius: 10px;
            white-space: nowrap;
        }
        
        .property-price.rent {
            color: #4169E1;
            background: #F0F8FF;
        }
        
        .property-address {
            color: #718096;
            font-size: 0.95rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .property-specs {
            display: flex;
            gap: 20px;
            margin: 15px 0;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
        }
        
        .spec-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .spec-value {
            font-weight: 700;
            color: #8B4513;
            font-size: 1.2rem;
        }
        
        .spec-label {
            font-size: 0.85rem;
            color: #718096;
            margin-top: 5px;
        }
        
        .property-features {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .feature {
            background: #FAF0E6;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .property-description {
            color: #718096;
            font-size: 0.95rem;
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .property-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 2px solid #f7fafc;
        }
        
        .property-posted {
            color: #718096;
            font-size: 0.9rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .contact-button {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .contact-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(139, 69, 19, 0.3);
        }
        
        .view-button {
            background: linear-gradient(135deg, #228B22 0%, #32CD32 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(34, 139, 34, 0.3);
        }
        
        .map-container {
            height: 450px;
            background: #FAF0E6;
            border-radius: 15px;
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            overflow: hidden;
            position: relative;
        }
        
        .map-header {
            width: 100%;
            padding: 20px;
            background: #8B4513;
            color: white;
            text-align: center;
            z-index: 2;
        }
        
        .map-placeholder {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .map-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 49px,
                rgba(139, 69, 19, 0.1) 49px,
                rgba(139, 69, 19, 0.1) 50px
            ),
            repeating-linear-gradient(
                90deg,
                transparent,
                transparent 49px,
                rgba(139, 69, 19, 0.1) 49px,
                rgba(139, 69, 19, 0.1) 50px
            );
        }
        
        .property-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #8B4513;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 3;
        }
        
        .property-marker:hover {
            transform: translate(-50%, -50%) scale(1.5);
            box-shadow: 0 0 0 4px rgba(139, 69, 19, 0.3);
        }
        
        .property-marker.sale {
            background: #228B22;
        }
        
        .property-marker.rent {
            background: #4169E1;
        }
        
        .no-results {
            text-align: center;
            padding: 60px 40px;
            color: #718096;
            font-size: 1.2rem;
            background: #f7fafc;
            border-radius: 15px;
            border: 2px dashed #cbd5e0;
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            color: #8B4513;
            font-size: 1.2rem;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #8B4513;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 992px) {
            .properties-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            
            .location-selector {
                flex-direction: column;
            }
            
            .price-range-filter {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .property-finder-card, .results-section {
                padding: 25px;
            }
            
            .properties-grid {
                grid-template-columns: 1fr;
            }
            
            .features-filter {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .property-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .property-price {
                align-self: flex-start;
            }
            
            .action-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .contact-button, .view-button {
                width: 100%;
                text-align: center;
            }
        }
        
        .current-location {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(139, 69, 19, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(139, 69, 19, 0); }
            100% { box-shadow: 0 0 0 0 rgba(139, 69, 19, 0); }
        }
        
        .house-animation {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            animation: houseGlow 3s infinite linear;
        }
        
        @keyframes houseGlow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .hot-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #FF4500;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            animation: hotPulse 1.5s infinite;
        }
        
        @keyframes hotPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .verified-badge {
            position: absolute;
            top: 50px;
            left: 15px;
            background: rgba(34, 139, 34, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .price-trend {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .trend-up {
            color: #228B22;
        }
        
        .trend-down {
            color: #DC3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè† Property Nearby - Find Homes</h1>
            <p>Discover houses, apartments, and properties for rent or sale near you</p>
        </div>
        
        <div class="property-finder-card">
            <div class="location-selector">
                <div class="location-option">
                    <h3>üìç Use Current Location</h3>
                    <button class="gps-button" onclick="getCurrentLocation()">
                        <span class="icon">üìç</span>
                        Detect My Location
                    </button>
                </div>
                
                <div class="location-option">
                    <h3>üèôÔ∏è Or Select City</h3>
                    <select id="citySelect" style="width: 100%; padding: 15px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem;">
                        <option value="">-- Select a City --</option>
                        <option value="mumbai">Mumbai</option>
                        <option value="delhi">Delhi</option>
                        <option value="bangalore">Bangalore</option>
                        <option value="chennai">Chennai</option>
                        <option value="hyderabad">Hyderabad</option>
                        <option value="pune">Pune</option>
                        <option value="kolkata">Kolkata</option>
                        <option value="ahmedabad">Ahmedabad</option>
                    </select>
                </div>
            </div>
            
            <div class="location-display" id="locationDisplay">
                <div class="current-location" id="currentLocationDisplay">
                    üìç Your Current Location
                </div>
                <div class="location-info">
                    <div class="location-detail">
                        <span class="location-label">Latitude</span>
                        <span class="location-value" id="latitude">0.0000</span>
                    </div>
                    <div class="location-detail">
                        <span class="location-label">Longitude</span>
                        <span class="location-value" id="longitude">0.0000</span>
                    </div>
                    <div class="location-detail">
                        <span class="location-label">Accuracy</span>
                        <span class="location-value" id="accuracy">0 meters</span>
                    </div>
                    <div class="location-detail">
                        <span class="location-label">Address</span>
                        <span class="location-value" id="address">Detecting...</span>
                    </div>
                </div>
            </div>
            
            <div class="filter-section">
                <div class="transaction-type">
                    <label class="transaction-option">
                        <input type="radio" name="transaction" id="transactionSale" value="sale" checked>
                        <span class="transaction-label">üè† For Sale</span>
                    </label>
                    <label class="transaction-option">
                        <input type="radio" name="transaction" id="transactionRent" value="rent">
                        <span class="transaction-label">üè¢ For Rent</span>
                    </label>
                    <label class="transaction-option">
                        <input type="radio" name="transaction" id="transactionBoth" value="both">
                        <span class="transaction-label">üîç Both</span>
                    </label>
                </div>
                
                <div class="filter-header">üè° Select Property Type</div>
                <div class="property-type-selector">
                    <button class="property-type-btn active" onclick="selectPropertyType('all')">
                        <span>üèòÔ∏è</span> All Types
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('apartment')">
                        <span>üè¢</span> Apartment
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('house')">
                        <span>üè†</span> Independent House
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('villa')">
                        <span>üè°</span> Villa
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('studio')">
                        <span>üìê</span> Studio
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('penthouse')">
                        <span>üèôÔ∏è</span> Penthouse
                    </button>
                    <button class="property-type-btn" onclick="selectPropertyType('plot')">
                        <span>üìè</span> Plot
                    </button>
                </div>
                
                <div class="price-range-filter">
                    <div class="price-input-group">
                        <label class="price-label">Minimum Price</label>
                        <select class="price-input" id="minPrice">
                            <option value="0">Any</option>
                            <option value="500000">‚Çπ5 Lakhs</option>
                            <option value="1000000">‚Çπ10 Lakhs</option>
                            <option value="2500000">‚Çπ25 Lakhs</option>
                            <option value="5000000">‚Çπ50 Lakhs</option>
                            <option value="10000000">‚Çπ1 Crore</option>
                            <option value="5000000" selected>‚Çπ50 Lakhs</option>
                        </select>
                    </div>
                    <div class="price-input-group">
                        <label class="price-label">Maximum Price</label>
                        <select class="price-input" id="maxPrice">
                            <option value="999999999">Any</option>
                            <option value="10000000">‚Çπ1 Crore</option>
                            <option value="25000000">‚Çπ2.5 Crores</option>
                            <option value="50000000">‚Çπ5 Crores</option>
                            <option value="100000000">‚Çπ10 Crores</option>
                            <option value="250000000">‚Çπ25 Crores</option>
                            <option value="50000000" selected>‚Çπ5 Crores</option>
                        </select>
                    </div>
                </div>
                
                <div class="filter-header">üõèÔ∏è Bedrooms</div>
                <div class="bedroom-filter">
                    <button class="bedroom-btn active" onclick="selectBedroom('any')">Any</button>
                    <button class="bedroom-btn" onclick="selectBedroom('1')">1 BHK</button>
                    <button class="bedroom-btn" onclick="selectBedroom('2')">2 BHK</button>
                    <button class="bedroom-btn" onclick="selectBedroom('3')">3 BHK</button>
                    <button class="bedroom-btn" onclick="selectBedroom('4')">4 BHK</button>
                    <button class="bedroom-btn" onclick="selectBedroom('5+')">5+ BHK</button>
                </div>
                
                <div class="filter-header">üéØ Filter by Features</div>
                <div class="features-filter">
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureFurnished" checked>
                        <span class="feature-label">üõãÔ∏è Fully Furnished</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureParking">
                        <span class="feature-label">üÖøÔ∏è Parking</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureGym">
                        <span class="feature-label">üí™ Gym</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featurePool">
                        <span class="feature-label">üèä Swimming Pool</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureSecurity">
                        <span class="feature-label">üëÆ 24/7 Security</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureBalcony">
                        <span class="feature-label">üåø Balcony</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureGarden">
                        <span class="feature-label">üå≥ Garden</span>
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="featureLift">
                        <span class="feature-label">üõó Lift/Elevator</span>
                    </label>
                </div>
                
                <div class="distance-filter">
                    <div class="distance-label">Search Radius:</div>
                    <div class="distance-slider">
                        <input type="range" id="distanceSlider" min="1" max="20" value="5" oninput="updateDistanceValue()">
                    </div>
                    <div class="distance-value" id="distanceValue">5 km</div>
                </div>
            </div>
            
            <button class="search-button" onclick="searchNearbyProperties()">
                <span class="icon">üîç</span>
                Find Properties
            </button>
        </div>
        
        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <div class="results-title" id="resultsTitle">Nearby Properties</div>
                <div class="results-count" id="resultsCount">0 properties found</div>
            </div>
            
            <div id="propertiesGrid" class="properties-grid">
                <!-- Properties will be loaded here -->
            </div>
            
            <div class="map-container">
                <div class="map-header">üó∫Ô∏è Property Map View</div>
                <div class="map-placeholder" id="propertyMap">
                    <div class="map-grid"></div>
                    <div style="text-align: center; position: relative; z-index: 4;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üè†</div>
                        <div>Interactive property map showing locations</div>
                        <div style="font-size: 0.9rem; color: #718096; margin-top: 10px;">Click on markers to view property details</div>
                    </div>
                </div>
            </div>
            
            <div class="loading" id="loading" style="display: none;">
                <div class="loading-spinner"></div>
                Finding properties near you...
            </div>
            <div class="no-results" id="noResults" style="display: none;">
                üö´ No properties found within your search criteria.
                Try adjusting your filters or increasing the search radius.
            </div>
        </div>
    </div>

    <script>
        // Sample property data for different cities
        const cityProperties = {
            mumbai: [
                { id: 1, name: "Luxury Sea View Apartment", type: "apartment", transaction: "sale", 
                  lat: 19.0760, lng: 72.8777, address: "Marine Drive, Mumbai", 
                  price: 85000000, size: "1800 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.7, distance: 1.2, posted: "2 days ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "balcony"],
                  description: "Stunning sea view apartment with premium amenities and modern interior",
                  verified: true, hot: true, trend: "up" },
                { id: 2, name: "Premium Bandra Apartment", type: "apartment", transaction: "rent", 
                  lat: 19.0596, lng: 72.8295, address: "Bandra West, Mumbai", 
                  price: 85000, size: "1200 sq.ft.", bedrooms: "2", bathrooms: "2", 
                  rating: 4.5, distance: 2.5, posted: "1 week ago", 
                  features: ["furnished", "parking", "gym", "security", "lift"],
                  description: "Spacious 2BHK in prime Bandra location with modern amenities",
                  verified: true, hot: false, trend: "stable" },
                { id: 3, name: "Juhu Beach Bungalow", type: "villa", transaction: "sale", 
                  lat: 19.1074, lng: 72.8263, address: "Juhu Tara Road, Mumbai", 
                  price: 250000000, size: "5000 sq.ft.", bedrooms: "5", bathrooms: "5", 
                  rating: 4.9, distance: 0.8, posted: "Today", 
                  features: ["furnished", "parking", "pool", "security", "garden"],
                  description: "Exclusive beachfront bungalow with private garden and pool",
                  verified: true, hot: true, trend: "up" },
                { id: 4, name: "Powai High-Rise", type: "apartment", transaction: "sale", 
                  lat: 19.1224, lng: 72.9053, address: "Hiranandani Gardens, Powai", 
                  price: 45000000, size: "1400 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.6, distance: 3.2, posted: "3 days ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "lift"],
                  description: "High-rise apartment with panoramic city views in Powai",
                  verified: true, hot: false, trend: "stable" },
                { id: 5, name: "Andheri Studio Apartment", type: "studio", transaction: "rent", 
                  lat: 19.1197, lng: 72.8463, address: "Andheri West, Mumbai", 
                  price: 25000, size: "450 sq.ft.", bedrooms: "1", bathrooms: "1", 
                  rating: 4.2, distance: 1.8, posted: "2 weeks ago", 
                  features: ["furnished", "security", "lift"],
                  description: "Compact studio apartment perfect for professionals",
                  verified: false, hot: false, trend: "down" }
            ],
            delhi: [
                { id: 6, name: "Lutyens Delhi Bungalow", type: "house", transaction: "sale", 
                  lat: 28.6139, lng: 77.2090, address: "Lutyens Delhi", 
                  price: 750000000, size: "8000 sq.ft.", bedrooms: "6", bathrooms: "6", 
                  rating: 4.8, distance: 2.1, posted: "1 week ago", 
                  features: ["furnished", "parking", "garden", "security"],
                  description: "Heritage bungalow in prime Lutyens Delhi with sprawling lawn",
                  verified: true, hot: true, trend: "up" },
                { id: 7, name: "Gurgaon Penthouse", type: "penthouse", transaction: "sale", 
                  lat: 28.4595, lng: 77.0266, address: "DLF Phase 5, Gurgaon", 
                  price: 120000000, size: "3500 sq.ft.", bedrooms: "4", bathrooms: "4", 
                  rating: 4.7, distance: 8.5, posted: "3 days ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "balcony"],
                  description: "Ultra-luxury penthouse with private terrace and city views",
                  verified: true, hot: true, trend: "up" },
                { id: 8, name: "South Delhi Apartment", type: "apartment", transaction: "rent", 
                  lat: 28.5355, lng: 77.2155, address: "Greater Kailash, Delhi", 
                  price: 65000, size: "1500 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.5, distance: 3.2, posted: "5 days ago", 
                  features: ["furnished", "parking", "security", "lift"],
                  description: "Spacious family apartment in premium South Delhi location",
                  verified: true, hot: false, trend: "stable" }
            ],
            bangalore: [
                { id: 9, name: "Koramangala Villa", type: "villa", transaction: "sale", 
                  lat: 12.9352, lng: 77.6245, address: "Koramangala, Bangalore", 
                  price: 95000000, size: "4000 sq.ft.", bedrooms: "4", bathrooms: "4", 
                  rating: 4.6, distance: 1.5, posted: "1 week ago", 
                  features: ["furnished", "parking", "garden", "security"],
                  description: "Modern villa in upscale Koramangala neighborhood",
                  verified: true, hot: true, trend: "up" },
                { id: 10, name: "Whitefield Apartment", type: "apartment", transaction: "rent", 
                  lat: 12.9698, lng: 77.7500, address: "Whitefield, Bangalore", 
                  price: 55000, size: "1300 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.4, distance: 4.2, posted: "2 days ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "lift"],
                  description: "IT corridor apartment with excellent amenities",
                  verified: true, hot: false, trend: "stable" },
                { id: 11, name: "Indiranagar Plot", type: "plot", transaction: "sale", 
                  lat: 12.9784, lng: 77.6408, address: "Indiranagar, Bangalore", 
                  price: 35000000, size: "2400 sq.ft.", bedrooms: "N/A", bathrooms: "N/A", 
                  rating: 4.3, distance: 2.8, posted: "2 weeks ago", 
                  features: ["parking"],
                  description: "Prime residential plot in developing area",
                  verified: true, hot: false, trend: "stable" }
            ],
            hyderabad: [
                { id: 12, name: "Jubilee Hills Villa", type: "villa", transaction: "sale", 
                  lat: 17.4333, lng: 78.4072, address: "Jubilee Hills, Hyderabad", 
                  price: 65000000, size: "3500 sq.ft.", bedrooms: "4", bathrooms: "4", 
                  rating: 4.7, distance: 2.1, posted: "3 days ago", 
                  features: ["furnished", "parking", "pool", "garden", "security"],
                  description: "Luxury villa in prime Jubilee Hills location",
                  verified: true, hot: true, trend: "up" },
                { id: 13, name: "Gachibowli High-Rise", type: "apartment", transaction: "rent", 
                  lat: 17.4401, lng: 78.3489, address: "Gachibowli, Hyderabad", 
                  price: 45000, size: "1100 sq.ft.", bedrooms: "2", bathrooms: "2", 
                  rating: 4.5, distance: 3.5, posted: "1 week ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "lift"],
                  description: "Modern apartment in IT hub with premium amenities",
                  verified: true, hot: false, trend: "stable" }
            ],
            pune: [
                { id: 14, name: "Koregaon Park Villa", type: "villa", transaction: "sale", 
                  lat: 18.5497, lng: 73.8975, address: "Koregaon Park, Pune", 
                  price: 45000000, size: "3000 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.6, distance: 1.8, posted: "4 days ago", 
                  features: ["furnished", "parking", "garden", "security"],
                  description: "Charming villa in upscale Koregaon Park area",
                  verified: true, hot: true, trend: "up" },
                { id: 15, name: "Hinjewadi Apartment", type: "apartment", transaction: "rent", 
                  lat: 18.5993, lng: 73.7448, address: "Hinjewadi, Pune", 
                  price: 35000, size: "1000 sq.ft.", bedrooms: "2", bathrooms: "2", 
                  rating: 4.3, distance: 6.2, posted: "2 weeks ago", 
                  features: ["furnished", "parking", "security", "lift"],
                  description: "IT professional-friendly apartment near tech parks",
                  verified: true, hot: false, trend: "stable" }
            ],
            chennai: [
                { id: 16, name: "Boat Club Road Bungalow", type: "house", transaction: "sale", 
                  lat: 13.0390, lng: 80.2620, address: "Boat Club Road, Chennai", 
                  price: 85000000, size: "6000 sq.ft.", bedrooms: "5", bathrooms: "5", 
                  rating: 4.8, distance: 1.2, posted: "1 week ago", 
                  features: ["furnished", "parking", "garden", "pool", "security"],
                  description: "Exclusive heritage bungalow in prime Chennai location",
                  verified: true, hot: true, trend: "up" },
                { id: 17, name: "OMR Apartment", type: "apartment", transaction: "rent", 
                  lat: 12.9412, lng: 80.2448, address: "OMR, Chennai", 
                  price: 40000, size: "1200 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.4, distance: 3.8, posted: "5 days ago", 
                  features: ["furnished", "parking", "gym", "pool", "security", "lift"],
                  description: "Modern apartment in IT corridor with sea view",
                  verified: true, hot: false, trend: "stable" }
            ],
            kolkata: [
                { id: 18, name: "Ballygunge Mansion", type: "house", transaction: "sale", 
                  lat: 22.5290, lng: 88.3654, address: "Ballygunge, Kolkata", 
                  price: 65000000, size: "7000 sq.ft.", bedrooms: "6", bathrooms: "6", 
                  rating: 4.7, distance: 1.5, posted: "2 weeks ago", 
                  features: ["furnished", "parking", "garden", "security"],
                  description: "Heritage mansion in upscale Ballygunge area",
                  verified: true, hot: true, trend: "up" },
                { id: 19, name: "Salt Lake Apartment", type: "apartment", transaction: "rent", 
                  lat: 22.5695, lng: 88.4093, address: "Salt Lake, Kolkata", 
                  price: 35000, size: "1300 sq.ft.", bedrooms: "3", bathrooms: "3", 
                  rating: 4.3, distance: 2.8, posted: "1 week ago", 
                  features: ["furnished", "parking", "security", "lift"],
                  description: "Spacious family apartment in planned township",
                  verified: true, hot: false, trend: "stable" }
            ],
            ahmedabad: [
                { id: 20, name: "Satellite Road Villa", type: "villa", transaction: "sale", 
                  lat: 23.0396, lng: 72.5138, address: "Satellite Road, Ahmedabad", 
                  price: 35000000, size: "3000 sq.ft.", bedrooms: "4", bathrooms: "4", 
                  rating: 4.5, distance: 1.8, posted: "3 days ago", 
                  features: ["furnished", "parking", "garden", "security"],
                  description: "Modern villa in prime Satellite Road location",
                  verified: true, hot: true, trend: "up" },
                { id: 21, name: "Prahlad Nagar Apartment", type: "apartment", transaction: "rent", 
                  lat: 23.0170, lng: 72.5080, address: "Prahlad Nagar, Ahmedabad", 
                  price: 30000, size: "1100 sq.ft.", bedrooms: "2", bathrooms: "2", 
                  rating: 4.4, distance: 2.5, posted: "4 days ago", 
                  features: ["furnished", "parking", "security", "lift"],
                  description: "Well-located apartment in commercial hub",
                  verified: true, hot: false, trend: "stable" }
            ]
        };

        // Property type icons
        const propertyTypeIcons = {
            apartment: "üè¢",
            house: "üè†",
            villa: "üè°",
            studio: "üìê",
            penthouse: "üèôÔ∏è",
            plot: "üìè"
        };

        // Feature icons
        const featureIcons = {
            furnished: "üõãÔ∏è",
            parking: "üÖøÔ∏è",
            gym: "üí™",
            pool: "üèä",
            security: "üëÆ",
            balcony: "üåø",
            garden: "üå≥",
            lift: "üõó"
        };

        // Age group icons
        const ageGroupIcons = {
            toddlers: "üë∂",
            kids: "üßí",
            teens: "üë¶",
            adults: "üë®",
            seniors: "üë¥"
        };

        let currentLocation = null;
        let selectedCity = null;
        let selectedPropertyType = 'all';
        let selectedBedrooms = 'any';
        let selectedTransaction = 'sale';
        let searchRadius = 5; // in kilometers

        // Initialize distance slider
        function updateDistanceValue() {
            searchRadius = document.getElementById('distanceSlider').value;
            document.getElementById('distanceValue').textContent = `${searchRadius} km`;
        }

        // Get current location using GPS
        function getCurrentLocation() {
            const locationDisplay = document.getElementById('locationDisplay');
            const locationButton = document.querySelector('.gps-button');
            
            // Show loading state
            locationButton.innerHTML = '<span class="icon">‚è≥</span>Detecting Location...';
            locationButton.disabled = true;
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        // Success
                        currentLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        };
                        
                        // Update UI
                        document.getElementById('latitude').textContent = currentLocation.lat.toFixed(6);
                        document.getElementById('longitude').textContent = currentLocation.lng.toFixed(6);
                        document.getElementById('accuracy').textContent = `${Math.round(currentLocation.accuracy)} meters`;
                        
                        // Get address from coordinates (simulated)
                        getAddressFromCoords(currentLocation.lat, currentLocation.lng);
                        
                        // Reset button
                        locationButton.innerHTML = '<span class="icon">üìç</span>Location Detected!';
                        locationButton.style.background = 'linear-gradient(135deg, #228B22 0%, #32CD32 100%)';
                        
                        // Show location display
                        locationDisplay.classList.add('active');
                        
                        // Clear selected city
                        document.getElementById('citySelect').value = '';
                        selectedCity = null;
                        
                        // Show current location indicator
                        document.getElementById('currentLocationDisplay').innerHTML = 'üìç Your Current Location';
                        
                        // Enable search
                        setTimeout(() => {
                            locationButton.innerHTML = '<span class="icon">üìç</span>Detect My Location';
                            locationButton.disabled = false;
                        }, 2000);
                    },
                    (error) => {
                        // Error
                        console.error('Error getting location:', error);
                        alert('Unable to get your location. Please enable GPS or select a city manually.');
                        locationButton.innerHTML = '<span class="icon">üìç</span>Detect My Location';
                        locationButton.disabled = false;
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } else {
                alert('Geolocation is not supported by your browser. Please select a city manually.');
                locationButton.innerHTML = '<span class="icon">üìç</span>Detect My Location';
                locationButton.disabled = false;
            }
        }

        // Simulate getting address from coordinates
        function getAddressFromCoords(lat, lng) {
            // This would normally call a geocoding API
            // For demo, we'll use a simulated response
            const addresses = [
                "Marine Drive Area, Mumbai",
                "Connaught Place, Delhi",
                "Koramangala, Bangalore",
                "Boat Club Road, Chennai",
                "Jubilee Hills, Hyderabad",
                "Koregaon Park, Pune"
            ];
            
            const randomAddress = addresses[Math.floor(Math.random() * addresses.length)];
            document.getElementById('address').textContent = randomAddress;
        }

        // Handle city selection
        document.getElementById('citySelect').addEventListener('change', function(e) {
            selectedCity = e.target.value;
            currentLocation = null;
            
            if (selectedCity) {
                // Update location display with city center coordinates
                const cityCenters = {
                    mumbai: { lat: 19.0760, lng: 72.8777, name: "Mumbai" },
                    delhi: { lat: 28.6139, lng: 77.2090, name: "Delhi" },
                    bangalore: { lat: 12.9716, lng: 77.5946, name: "Bangalore" },
                    chennai: { lat: 13.0827, lng: 80.2707, name: "Chennai" },
                    hyderabad: { lat: 17.3850, lng: 78.4867, name: "Hyderabad" },
                    pune: { lat: 18.5204, lng: 73.8567, name: "Pune" },
                    kolkata: { lat: 22.5726, lng: 88.3639, name: "Kolkata" },
                    ahmedabad: { lat: 23.0225, lng: 72.5714, name: "Ahmedabad" }
                };
                
                const city = cityCenters[selectedCity];
                currentLocation = { lat: city.lat, lng: city.lng, accuracy: 1000 };
                
                document.getElementById('latitude').textContent = city.lat.toFixed(6);
                document.getElementById('longitude').textContent = city.lng.toFixed(6);
                document.getElementById('accuracy').textContent = "City Center";
                document.getElementById('address').textContent = `Central ${city.name}`;
                
                document.getElementById('locationDisplay').classList.add('active');
                document.getElementById('currentLocationDisplay').innerHTML = `üìç ${city.name} City Center`;
            }
        });

        // Property type selection
        function selectPropertyType(type) {
            selectedPropertyType = type;
            
            // Update UI
            document.querySelectorAll('.property-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // If results are already shown, filter them
            if (document.getElementById('resultsSection').classList.contains('active')) {
                searchNearbyProperties();
            }
        }

        // Bedroom selection
        function selectBedroom(bedrooms) {
            selectedBedrooms = bedrooms;
            
            // Update UI
            document.querySelectorAll('.bedroom-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // If results are already shown, filter them
            if (document.getElementById('resultsSection').classList.contains('active')) {
                searchNearbyProperties();
            }
        }

        // Transaction type selection
        document.querySelectorAll('input[name="transaction"]').forEach(radio => {
            radio.addEventListener('change', function(e) {
                selectedTransaction = e.target.value;
                
                // If results are already shown, filter them
                if (document.getElementById('resultsSection').classList.contains('active')) {
                    searchNearbyProperties();
                }
            });
        });

        // Get selected features
        function getSelectedFeatures() {
            const features = [];
            const checkboxes = [
                'featureFurnished', 'featureParking', 'featureGym', 'featurePool',
                'featureSecurity', 'featureBalcony', 'featureGarden', 'featureLift'
            ];
            
            checkboxes.forEach(id => {
                if (document.getElementById(id).checked) {
                    features.push(id.replace('feature', '').toLowerCase());
                }
            });
            
            return features;
        }

        // Get price range
        function getPriceRange() {
            const minPrice = parseInt(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseInt(document.getElementById('maxPrice').value) || 999999999;
            return { min: minPrice, max: maxPrice };
        }

        // Search for nearby properties
        function searchNearbyProperties() {
            if (!currentLocation && !selectedCity) {
                alert('Please select your location or enable GPS first.');
                return;
            }
            
            // Show results section
            document.getElementById('resultsSection').classList.add('active');
            document.getElementById('loading').style.display = 'block';
            document.getElementById('noResults').style.display = 'none';
            document.getElementById('propertiesGrid').innerHTML = '';
            
            // Get properties based on selection
            let properties = [];
            if (selectedCity && cityProperties[selectedCity]) {
                properties = [...cityProperties[selectedCity]];
            } else {
                // For GPS location, combine properties from all cities
                Object.values(cityProperties).forEach(cityProps => {
                    properties.push(...cityProps);
                });
                
                // Simulate distance calculation
                properties.forEach(property => {
                    // In real app, calculate actual distance using Haversine formula
                    property.distance = Math.random() * searchRadius;
                });
            }
            
            // Simulate API delay
            setTimeout(() => {
                displayProperties(properties);
            }, 1000);
        }

        // Display properties
        function displayProperties(properties) {
            const propertiesGrid = document.getElementById('propertiesGrid');
            const loading = document.getElementById('loading');
            const noResults = document.getElementById('noResults');
            const propertyMap = document.getElementById('propertyMap');
            
            loading.style.display = 'none';
            propertiesGrid.innerHTML = '';
            
            // Clear existing map markers
            const existingMarkers = propertyMap.querySelectorAll('.property-marker');
            existingMarkers.forEach(marker => marker.remove());
            
            // Filter by distance
            const filteredProperties = properties.filter(property => property.distance <= searchRadius);
            
            // Filter by transaction type
            let transactionFiltered = filteredProperties;
            if (selectedTransaction !== 'both') {
                transactionFiltered = filteredProperties.filter(property => property.transaction === selectedTransaction);
            }
            
            // Filter by property type if not 'all'
            let typeFiltered = transactionFiltered;
            if (selectedPropertyType !== 'all') {
                typeFiltered = transactionFiltered.filter(property => property.type === selectedPropertyType);
            }
            
            // Filter by bedrooms
            let bedroomFiltered = typeFiltered;
            if (selectedBedrooms !== 'any') {
                if (selectedBedrooms === '5+') {
                    bedroomFiltered = typeFiltered.filter(property => {
                        const beds = parseInt(property.bedrooms);
                        return beds >= 5 || property.bedrooms === '5+';
                    });
                } else {
                    bedroomFiltered = typeFiltered.filter(property => property.bedrooms === selectedBedrooms);
                }
            }
            
            // Filter by price range
            const priceRange = getPriceRange();
            let priceFiltered = bedroomFiltered.filter(property => {
                return property.price >= priceRange.min && property.price <= priceRange.max;
            });
            
            // Filter by features
            const selectedFeatures = getSelectedFeatures();
            let featureFiltered = priceFiltered;
            
            if (selectedFeatures.length > 0) {
                featureFiltered = priceFiltered.filter(property => {
                    return selectedFeatures.every(feature => property.features.includes(feature));
                });
            }
            
            if (featureFiltered.length === 0) {
                noResults.style.display = 'block';
                document.getElementById('resultsCount').textContent = '0 properties found';
                return;
            }
            
            document.getElementById('resultsCount').textContent = `${featureFiltered.length} properties found`;
            
            // Sort by distance
            featureFiltered.sort((a, b) => a.distance - b.distance);
            
            // Display properties
            featureFiltered.forEach(property => {
                const propertyCard = createPropertyCard(property);
                propertiesGrid.appendChild(propertyCard);
                
                // Add marker to map
                addPropertyMarker(property);
            });
            
            // Update results title
            const transactionText = selectedTransaction === 'sale' ? 'For Sale' : 
                                  selectedTransaction === 'rent' ? 'For Rent' : 
                                  'Properties';
            const propertyTypeName = selectedPropertyType === 'all' ? '' : ` ${propertyTypeInfo[selectedPropertyType] || ''}`;
            document.getElementById('resultsTitle').textContent = `Nearby${propertyTypeName} ${transactionText}`;
            
            // Add house animation to property images
            document.querySelectorAll('.property-image').forEach(img => {
                const houseAnim = document.createElement('div');
                houseAnim.className = 'house-animation';
                img.appendChild(houseAnim);
            });
        }

        // Create property card HTML
        function createPropertyCard(property) {
            const card = document.createElement('div');
            card.className = 'property-card';
            
            // Generate features list
            const featuresHtml = property.features.map(feature => {
                const icon = featureIcons[feature] || '‚úÖ';
                const label = feature.charAt(0).toUpperCase() + feature.slice(1);
                return `<span class="feature">${icon} ${label}</span>`;
            }).join('');
            
            // Format price
            const priceText = property.transaction === 'sale' ? 
                `‚Çπ${formatPrice(property.price)}` : 
                `‚Çπ${property.price.toLocaleString()}/month`;
            
            // Trend indicator
            const trendIcon = property.trend === 'up' ? 'üìà' : 
                             property.trend === 'down' ? 'üìâ' : '‚û°Ô∏è';
            const trendClass = property.trend === 'up' ? 'trend-up' : 
                              property.trend === 'down' ? 'trend-down' : '';
            
            card.innerHTML = `
                <div class="property-image">
                    ${property.hot ? '<div class="hot-badge">üî• Hot Property</div>' : ''}
                    ${property.verified ? '<div class="verified-badge">‚úÖ Verified</div>' : ''}
                    <div class="property-type-badge">${propertyTypeIcons[property.type]} ${property.type.toUpperCase()}</div>
                    <div class="property-status ${property.transaction}">${property.transaction === 'sale' ? 'FOR SALE' : 'FOR RENT'}</div>
                </div>
                <div class="property-content">
                    <div class="property-header">
                        <div>
                            <div class="property-name">${property.name}</div>
                            <div class="property-address">üìç ${property.address}</div>
                        </div>
                        <div class="property-price ${property.transaction}">${priceText}</div>
                    </div>
                    
                    <div class="property-specs">
                        <div class="spec-item">
                            <div class="spec-value">${property.size}</div>
                            <div class="spec-label">Area</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value">${property.bedrooms}</div>
                            <div class="spec-label">Bedrooms</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value">${property.bathrooms}</div>
                            <div class="spec-label">Bathrooms</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value">${property.distance.toFixed(1)} km</div>
                            <div class="spec-label">Distance</div>
                        </div>
                    </div>
                    
                    <div class="property-features">
                        ${featuresHtml}
                    </div>
                    
                    <div class="property-description">
                        ${property.description}
                    </div>
                    
                    <div class="property-footer">
                        <div class="property-posted">
                            üìÖ Posted: ${property.posted}
                            <div class="price-trend ${trendClass}">
                                ${trendIcon} ${property.trend === 'up' ? 'Price Rising' : property.trend === 'down' ? 'Price Dropping' : 'Stable Price'}
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="contact-button" onclick="contactOwner(${property.id})">
                                üìû Contact Owner
                            </button>
                            <button class="view-button" onclick="viewProperty(${property.id})">
                                üëÅÔ∏è View Details
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Add property marker to map
        function addPropertyMarker(property) {
            const propertyMap = document.getElementById('propertyMap');
            
            // Create random positions for demo (in real app, use actual coordinates)
            const randomX = 20 + Math.random() * 60;
            const randomY = 20 + Math.random() * 60;
            
            const marker = document.createElement('div');
            marker.className = `property-marker ${property.transaction}`;
            marker.style.left = `${randomX}%`;
            marker.style.top = `${randomY}%`;
            marker.title = property.name;
            marker.onclick = () => viewProperty(property.id);
            
            propertyMap.appendChild(marker);
        }

        // Format price for display
        function formatPrice(price) {
            if (price >= 10000000) {
                return (price / 10000000).toFixed(2) + ' Cr';
            } else if (price >= 100000) {
                return (price / 100000).toFixed(2) + ' L';
            } else {
                return price.toLocaleString();
            }
        }

        // Contact owner button click
        function contactOwner(propertyId) {
            // Find the property
            let property;
            for (const city in cityProperties) {
                const found = cityProperties[city].find(p => p.id === propertyId);
                if (found) {
                    property = found;
                    break;
                }
            }
            
            if (property) {
                alert(`üìû Contacting Property Owner:\n\n` +
                      `Property: ${property.name}\n` +
                      `Type: ${property.type.toUpperCase()}\n` +
                      `Transaction: ${property.transaction === 'sale' ? 'For Sale' : 'For Rent'}\n` +
                      `Price: ${property.transaction === 'sale' ? `‚Çπ${formatPrice(property.price)}` : `‚Çπ${property.price}/month`}\n` +
                      `Address: ${property.address}\n\n` +
                      `Opening contact form...`);
                
                // In a real app, you would show a contact form or dial the number
            }
        }

        // View property button click
        function viewProperty(propertyId) {
            // Find the property
            let property;
            for (const city in cityProperties) {
                const found = cityProperties[city].find(p => p.id === propertyId);
                if (found) {
                    property = found;
                    break;
                }
            }
            
            if (property) {
                alert(`üè† Property Details:\n\n` +
                      `Name: ${property.name}\n` +
                      `Type: ${property.type.toUpperCase()}\n` +
                      `Status: ${property.transaction === 'sale' ? 'For Sale' : 'For Rent'}\n` +
                      `Price: ${property.transaction === 'sale' ? `‚Çπ${formatPrice(property.price)}` : `‚Çπ${property.price}/month`}\n` +
                      `Size: ${property.size}\n` +
                      `Bedrooms: ${property.bedrooms}\n` +
                      `Bathrooms: ${property.bathrooms}\n` +
                      `Address: ${property.address}\n` +
                      `Distance: ${property.distance.toFixed(1)} km\n` +
                      `Posted: ${property.posted}\n\n` +
                      `Features: ${property.features.map(f => f.charAt(0).toUpperCase() + f.slice(1)).join(', ')}\n\n` +
                      `Description: ${property.description}\n\n` +
                      `Would you like to schedule a viewing?`);
                
                // In a real app, you would show detailed property page
            }
        }

        // Initialize
        updateDistanceValue();
    </script>
</body>
</html>