<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Train Ticket Booking System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .booking-card {
            background: white;
            border-radius: 15px;
            padding: 35px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            margin-bottom: 40px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }
        
        .form-group select, 
        .form-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }
        
        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #1a237e;
            box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1);
        }
        
        .search-button {
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            letter-spacing: 0.5px;
        }
        
        .search-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }
        
        .results-section {
            background: white;
            border-radius: 15px;
            padding: 35px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            margin-bottom: 40px;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f0f0f0;
        }
        
        .results-title {
            font-size: 1.8rem;
            color: #1a237e;
            font-weight: 700;
        }
        
        .results-count {
            background: #1a237e;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .route-summary {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #1a237e;
        }
        
        .route-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .route-item {
            display: flex;
            flex-direction: column;
        }
        
        .route-label {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .route-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a237e;
        }
        
        .train-list {
            display: grid;
            gap: 25px;
        }
        
        .train-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        .train-card:hover {
            border-color: #1a237e;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .train-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
        }
        
        .train-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f5f5f5;
        }
        
        .train-name {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .train-number {
            background: #1a237e;
            color: white;
            padding: 5px 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .train-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1a237e;
        }
        
        .train-type {
            background: #e8eaf6;
            color: #1a237e;
            padding: 6px 15px;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
        }
        
        .train-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .detail-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
        }
        
        .time-display {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .time-icon {
            font-size: 1.5rem;
            color: #1a237e;
        }
        
        .journey-timeline {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(90deg, #e3f2fd, #f3e5f5);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
        }
        
        .timeline-station {
            text-align: center;
            z-index: 2;
        }
        
        .station-name {
            font-weight: 600;
            color: #1a237e;
            margin-bottom: 5px;
        }
        
        .station-time {
            font-size: 1.1rem;
            font-weight: 700;
            color: #333;
        }
        
        .timeline-track {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 3px;
            background: #1a237e;
            z-index: 1;
        }
        
        .timeline-track::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 0;
            width: 10px;
            height: 10px;
            background: #1a237e;
            border-radius: 50%;
        }
        
        .timeline-track::after {
            content: '';
            position: absolute;
            top: -4px;
            right: 0;
            width: 10px;
            height: 10px;
            background: #1a237e;
            border-radius: 50%;
        }
        
        .train-classes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .class-card {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .class-card:hover {
            border-color: #1a237e;
            background: #f8f9ff;
        }
        
        .class-card.selected {
            border-color: #1a237e;
            background: #e8eaf6;
            box-shadow: 0 5px 15px rgba(26, 35, 126, 0.1);
        }
        
        .class-name {
            font-weight: 600;
            color: #1a237e;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .class-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .class-availability {
            font-size: 0.9rem;
            color: #4caf50;
            font-weight: 500;
        }
        
        .train-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .train-amenities {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .amenity {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #e8eaf6;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #1a237e;
        }
        
        .book-button {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
        }
        
        .book-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }
        
        .no-results {
            text-align: center;
            padding: 60px 40px;
            color: #666;
            font-size: 1.2rem;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #ddd;
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            color: #1a237e;
            font-size: 1.2rem;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1a237e;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 992px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .train-details {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .journey-timeline {
                flex-direction: column;
                gap: 20px;
            }
            
            .timeline-track {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .booking-card, .results-section {
                padding: 25px;
            }
            
            .train-details {
                grid-template-columns: 1fr;
            }
            
            .train-footer {
                flex-direction: column;
                gap: 20px;
                align-items: stretch;
            }
            
            .train-amenities {
                justify-content: center;
            }
            
            .book-button {
                width: 100%;
            }
        }
        
        .success-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 5px 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            transform: rotate(15deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÜ Indian Railways Ticket Booking</h1>
            <p>Book your train tickets with 20+ trains available every 30 minutes</p>
        </div>
        
        <div class="booking-card">
            <div class="form-row">
                <div class="form-group">
                    <label for="fromCity">From City</label>
                    <select id="fromCity" onchange="updateFromStations()">
                        <option value="">-- Select City --</option>
                        <option value="delhi">Delhi</option>
                        <option value="mumbai">Mumbai</option>
                        <option value="chennai">Chennai</option>
                        <option value="kolkata">Kolkata</option>
                        <option value="bangalore">Bangalore</option>
                        <option value="hyderabad">Hyderabad</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="toCity">To City</label>
                    <select id="toCity" onchange="updateToStations()">
                        <option value="">-- Select City --</option>
                        <option value="delhi">Delhi</option>
                        <option value="mumbai">Mumbai</option>
                        <option value="chennai">Chennai</option>
                        <option value="kolkata">Kolkata</option>
                        <option value="bangalore">Bangalore</option>
                        <option value="hyderabad">Hyderabad</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fromStation">From Station</label>
                    <select id="fromStation" disabled>
                        <option value="">-- Select Station --</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="toStation">To Station</label>
                    <select id="toStation" disabled>
                        <option value="">-- Select Station --</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="date">Journey Date</label>
                    <input type="date" id="date" value="<?php echo date('Y-m-d'); ?>">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="class">Travel Class</label>
                    <select id="class">
                        <option value="all">All Classes</option>
                        <option value="1a">AC First Class (1A)</option>
                        <option value="2a">AC 2 Tier (2A)</option>
                        <option value="3a">AC 3 Tier (3A)</option>
                        <option value="sl">Sleeper (SL)</option>
                        <option value="cc">AC Chair Car (CC)</option>
                        <option value="2s">Second Sitting (2S)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="quota">Quota</label>
                    <select id="quota">
                        <option value="general">General</option>
                        <option value="tatkal">Tatkal</option>
                        <option value="ladies">Ladies</option>
                        <option value="premium">Premium Tatkal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="passengers">Passengers</label>
                    <select id="passengers">
                        <option value="1">1 Passenger</option>
                        <option value="2">2 Passengers</option>
                        <option value="3">3 Passengers</option>
                        <option value="4">4 Passengers</option>
                        <option value="5">5 Passengers</option>
                    </select>
                </div>
            </div>
            
            <button class="search-button" onclick="searchTrains()">
                üîç Search Trains
            </button>
        </div>
        
        <div class="results-section" id="resultsSection" style="display: none;">
            <div class="results-header">
                <div class="results-title">Available Trains</div>
                <div class="results-count" id="resultsCount">0 trains found</div>
            </div>
            
            <div class="route-summary">
                <div class="route-details">
                    <div class="route-item">
                        <span class="route-label">Route</span>
                        <span class="route-value" id="routeInfo"></span>
                    </div>
                    <div class="route-item">
                        <span class="route-label">Date</span>
                        <span class="route-value" id="dateInfo"></span>
                    </div>
                    <div class="route-item">
                        <span class="route-label">Trains Available</span>
                        <span class="route-value" id="timeInfo">Every 30 minutes</span>
                    </div>
                    <div class="route-item">
                        <span class="route-label">Quota</span>
                        <span class="route-value" id="quotaInfo"></span>
                    </div>
                </div>
            </div>
            
            <div id="trainResults"></div>
            <div class="loading" id="loading" style="display: none;">
                <div class="loading-spinner"></div>
                Searching for available trains...
            </div>
            <div class="no-results" id="noResults" style="display: none;">
                üö´ No trains found for this route. Please try different stations or check back later.
            </div>
        </div>
    </div>

    <script>
        // City stations data for major Indian cities
        const cityStations = {
            delhi: [
                "New Delhi (NDLS)", "Old Delhi (DLI)", "Hazrat Nizamuddin (NZM)",
                "Anand Vihar (ANVT)", "Sarai Rohilla (DEE)", "Delhi Cantt (DEC)",
                "Shahdara (SHD)", "Tilak Bridge (TKJ)", "Delhi Safdarjung (DSJ)",
                "Sabzi Mandi (SZM)", "Dayabasti (DBS)", "Patel Nagar (PTNR)",
                "Kishanganj (KSNG)", "Mangolpuri (MGLP)", "Nangloi (NNN)",
                "Badli (BHD)", "Adarsh Nagar (ANDI)", "Azadpur (AZDP)",
                "Subzi Mandi (SZM)", "Punjabi Bagh (PBGH)"
            ],
            mumbai: [
                "Mumbai Central (BCT)", "Chatrapati Shivaji Terminus (CSTM)",
                "Lokmanya Tilak Terminus (LTT)", "Bandra Terminus (BDTS)",
                "Dadar (DR)", "Andheri (ADH)", "Borivali (BVI)",
                "Churchgate (CCG)", "Marine Lines (MEL)", "Grant Road (GTR)",
                "Dahisar (DIC)", "Kandivali (KNDI)", "Goregaon (GMN)",
                "Jogeshwari (JOS)", "Ram Mandir (RMDR)", "Santacruz (STC)",
                "Vile Parle (VLP)", "Malad (MDD)", "Khar Road (KHAR)",
                "Matunga Road (MRU)"
            ],
            chennai: [
                "Chennai Central (MAS)", "Chennai Egmore (MS)", "Tambaram (TBM)",
                "Chennai Beach (MSB)", "Chennai Fort (MSF)", "Perambur (PER)",
                "Avadi (AVD)", "Ambattur (ABU)", "Korattur (KOTR)",
                "Villivakkam (VLK)", "Mambalam (MBM)", "Saidapet (SP)",
                "Guindy (GDY)", "St. Thomas Mount (STM)", "Pallavaram (PV)",
                "Chromepet (CMP)", "Tirusulam (TLM)", "Minambakkam (MN)",
                "Paranur (PWU)", "Chengalpattu (CGL)"
            ],
            kolkata: [
                "Howrah Junction (HWH)", "Sealdah (SDAH)", "Kolkata (KOAA)",
                "Santragachi (SRC)", "Dankuni (DKAE)", "Bandel (BDC)",
                "Naihati (NH)", "Kalyani (KYI)", "Kancharapara (KPA)",
                "Madhyamgram (MMG)", "Barasat (BT)", "Dum Dum (DDJ)",
                "Bidhan Nagar (BNR)", "Salt Lake (SLK)", "Tollygunge (TG)",
                "Garia (GRA)", "Sonarpur (SPR)", "Baruipur (BRP)",
                "Diamond Harbour (DH)", "Budge Budge (BGR)"
            ],
            bangalore: [
                "Bangalore City (SBC)", "Yesvantpur Junction (YPR)",
                "Krishnarajapuram (KJM)", "Whitefield (WFD)",
                "Banaswadi (BAND)", "Bengaluru Cantonment (BNC)",
                "Kengeri (KGI)", "Yelahanka (YNK)", "Hosur (HSRA)",
                "Malleswaram (MWM)", "Jalahalli (JLL)", "Chikkabanavara (BAW)",
                "Tumkur (TK)", "Ramanagaram (RMGM)", "Mandya (MYA)",
                "Mysore Junction (MYS)", "Bangalore East (BNCE)",
                "Bangalore South (BNCS)", "Hebbal (HEB)", "Nelamangala (NMGA)"
            ],
            hyderabad: [
                "Hyderabad Deccan (HYB)", "Secunderabad Junction (SC)",
                "Kacheguda (KCG)", "Lingampalli (LPI)", "Begumpet (BMT)",
                "Hafizpet (HFZ)", "Uppal (UPL)", "Malkajgiri (MJF)",
                "Falaknuma (FM)", "Nampally (NPL)", "Bolarum (BMO)",
                "Moula Ali (MLY)", "Charlapalli (CHZ)", "Ghatkesar (GT)",
                "Bhongir (BG)", "Vikarabad (VKB)", "Tandur (TDU)",
                "Wadi (WADI)", "Kazipet Junction (KZJ)", "Warangal (WL)"
            ]
        };

        // Train data
        const trainOperators = [
            { name: "Rajdhani Express", type: "Superfast", class: ["1A", "2A", "3A"] },
            { name: "Shatabdi Express", type: "Superfast", class: ["CC", "EC"] },
            { name: "Duronto Express", type: "Superfast", class: ["1A", "2A", "3A", "SL"] },
            { name: "Garib Rath", type: "Superfast", class: ["3A", "SL"] },
            { name: "Jan Shatabdi", type: "Superfast", class: ["CC", "2S"] },
            { name: "Sampark Kranti", type: "Superfast", class: ["2A", "3A", "SL"] },
            { name: "AC Express", type: "Express", class: ["1A", "2A", "3A"] },
            { name: "Superfast Express", type: "Superfast", class: ["2A", "3A", "SL", "2S"] },
            { name: "Mail Express", type: "Mail", class: ["2A", "3A", "SL", "2S"] },
            { name: "Passenger", type: "Passenger", class: ["SL", "2S"] },
            { name: "MEMU", type: "Local", class: ["2S"] },
            { name: "DEMU", type: "Local", class: ["2S"] },
            { name: "Vande Bharat", type: "Superfast", class: ["CC", "EC"] },
            { name: "Gatimaan Express", type: "Superfast", class: ["CC", "EC"] },
            { name: "Tejas Express", type: "Superfast", class: ["CC", "EC"] }
        ];

        const classDetails = {
            "1A": { name: "AC First Class", priceMultiplier: 5, amenities: ["Bedding", "Meals", "Private Cabin"] },
            "2A": { name: "AC 2 Tier", priceMultiplier: 3.5, amenities: ["Bedding", "Curtains", "Reading Light"] },
            "3A": { name: "AC 3 Tier", priceMultiplier: 2.5, amenities: ["Bedding", "Curtains"] },
            "SL": { name: "Sleeper Class", priceMultiplier: 1, amenities: ["Bedding"] },
            "CC": { name: "AC Chair Car", priceMultiplier: 2, amenities: ["Reclining Seats", "Snacks"] },
            "EC": { name: "Executive Chair", priceMultiplier: 3, amenities: ["Reclining Seats", "Meals", "Newspaper"] },
            "2S": { name: "Second Sitting", priceMultiplier: 0.6, amenities: ["Basic Seats"] }
        };

        let selectedTrainClass = null;

        function updateFromStations() {
            const city = document.getElementById('fromCity').value;
            const stationSelect = document.getElementById('fromStation');
            
            if (city) {
                stationSelect.disabled = false;
                stationSelect.innerHTML = '<option value="">-- Select Station --</option>';
                
                cityStations[city].forEach(station => {
                    const option = document.createElement('option');
                    option.value = station;
                    option.textContent = station;
                    stationSelect.appendChild(option);
                });
            } else {
                stationSelect.disabled = true;
                stationSelect.innerHTML = '<option value="">-- Select Station --</option>';
            }
        }

        function updateToStations() {
            const city = document.getElementById('toCity').value;
            const stationSelect = document.getElementById('toStation');
            
            if (city) {
                stationSelect.disabled = false;
                stationSelect.innerHTML = '<option value="">-- Select Station --</option>';
                
                cityStations[city].forEach(station => {
                    const option = document.createElement('option');
                    option.value = station;
                    option.textContent = station;
                    stationSelect.appendChild(option);
                });
            } else {
                stationSelect.disabled = true;
                stationSelect.innerHTML = '<option value="">-- Select Station --</option>';
            }
        }

        function searchTrains() {
            const fromCity = document.getElementById('fromCity').value;
            const toCity = document.getElementById('toCity').value;
            const fromStation = document.getElementById('fromStation').value;
            const toStation = document.getElementById('toStation').value;
            const date = document.getElementById('date').value;
            const travelClass = document.getElementById('class').value;
            const quota = document.getElementById('quota').value;
            
            // Validation
            if (!fromCity || !toCity || !fromStation || !toStation) {
                alert('Please select both cities and stations');
                return;
            }
            
            if (fromCity === toCity && fromStation === toStation) {
                alert('From and To stations cannot be the same');
                return;
            }
            
            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('loading').style.display = 'block';
            document.getElementById('noResults').style.display = 'none';
            document.getElementById('trainResults').innerHTML = '';
            
            // Update route info
            document.getElementById('routeInfo').textContent = `${fromStation} ‚Üí ${toStation}`;
            document.getElementById('dateInfo').textContent = new Date(date).toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('quotaInfo').textContent = quota.charAt(0).toUpperCase() + quota.slice(1);
            
            // Simulate API call delay
            setTimeout(() => {
                generateTrainResults(fromCity, toCity, fromStation, toStation, date, travelClass, quota);
            }, 1500);
        }

        function generateTrainResults(fromCity, toCity, fromStation, toStation, date, travelClass, quota) {
            const trainResults = document.getElementById('trainResults');
            const loading = document.getElementById('loading');
            const noResults = document.getElementById('noResults');
            
            loading.style.display = 'none';
            trainResults.innerHTML = '';
            
            // Generate exactly 20 trains as requested, every 30 minutes
            const numTrains = 20;
            const trains = [];
            
            // Generate departure times every 30 minutes from 00:00 to 23:30
            for (let i = 0; i < numTrains; i++) {
                const hour = Math.floor(i / 2) % 24;
                const minute = (i % 2) * 30;
                const departureTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                
                trains.push(createTrain(i + 1, fromStation, toStation, departureTime));
            }
            
            if (trains.length === 0) {
                noResults.style.display = 'block';
                document.getElementById('resultsCount').textContent = '0 trains found';
                return;
            }
            
            document.getElementById('resultsCount').textContent = `${trains.length} trains found`;
            
            // Display trains
            trains.forEach(train => {
                const trainCard = createTrainCard(train, travelClass);
                trainResults.appendChild(trainCard);
            });
        }

        function createTrain(trainNumber, fromStation, toStation, departureTime) {
            const operator = trainOperators[Math.floor(Math.random() * trainOperators.length)];
            const duration = Math.floor(Math.random() * 12) + 3; // 3-15 hours
            const [depHour, depMinute] = departureTime.split(':').map(Number);
            const arrivalHour = (depHour + duration) % 24;
            const arrivalTime = `${arrivalHour.toString().padStart(2, '0')}:${depMinute.toString().padStart(2, '0')}`;
            
            // Calculate base price based on distance (simulated)
            const basePrice = Math.floor(Math.random() * 500) + 1000; // 1000-1500
            
            // Generate train classes and prices
            const classes = [];
            operator.class.forEach(cls => {
                const classDetail = classDetails[cls];
                const price = Math.round(basePrice * classDetail.priceMultiplier);
                const availability = Math.floor(Math.random() * 20) + 5; // 5-25 seats
                
                classes.push({
                    code: cls,
                    name: classDetail.name,
                    price: price,
                    availability: availability,
                    amenities: classDetail.amenities
                });
            });
            
            return {
                number: trainNumber + Math.floor(Math.random() * 9000) + 1000,
                name: `${operator.name} #${trainNumber}`,
                type: operator.type,
                departure: departureTime,
                arrival: arrivalTime,
                duration: duration,
                fromStation: fromStation,
                toStation: toStation,
                classes: classes,
                amenities: ["WiFi", "Pantry", "AC", "LED Display", "Bio Toilet", "Mobile Charging", "Water Purifier"],
                runningDays: "Daily",
                avgSpeed: Math.floor(Math.random() * 60) + 70 // 70-130 km/h
            };
        }

        function createTrainCard(train, selectedClass) {
            const card = document.createElement('div');
            card.className = 'train-card';
            
            // Randomly mark some trains as popular
            if (Math.random() > 0.7) {
                const badge = document.createElement('div');
                badge.className = 'success-badge';
                badge.textContent = 'Popular';
                card.appendChild(badge);
            }
            
            card.innerHTML = `
                <div class="train-header">
                    <div class="train-name">
                        <div class="train-number">${train.number}</div>
                        <div class="train-title">${train.name}</div>
                    </div>
                    <div class="train-type">${train.type}</div>
                </div>
                
                <div class="journey-timeline">
                    <div class="timeline-station">
                        <div class="station-name">${train.fromStation.split('(')[0]}</div>
                        <div class="station-time">${train.departure}</div>
                    </div>
                    <div class="timeline-track"></div>
                    <div class="timeline-station">
                        <div class="station-name">${train.toStation.split('(')[0]}</div>
                        <div class="station-time">${train.arrival}</div>
                    </div>
                </div>
                
                <div class="train-details">
                    <div class="detail-item">
                        <span class="detail-label">Duration</span>
                        <span class="detail-value">${train.duration} hours</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Running Days</span>
                        <span class="detail-value">${train.runningDays}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Avg Speed</span>
                        <span class="detail-value">${train.avgSpeed} km/h</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Distance</span>
                        <span class="detail-value">${train.duration * train.avgSpeed} km</span>
                    </div>
                </div>
                
                <h4 style="margin: 20px 0 10px; color: #1a237e;">Available Classes</h4>
                <div class="train-classes" id="classes-${train.number}">
                    ${train.classes.map(cls => `
                        <div class="class-card" onclick="selectClass(${train.number}, '${cls.code}')">
                            <div class="class-name">${cls.name}</div>
                            <div class="class-price">‚Çπ${cls.price}</div>
                            <div class="class-availability">${cls.availability} seats left</div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="train-footer">
                    <div class="train-amenities">
                        ${train.amenities.map(amenity => `
                            <div class="amenity">‚úì ${amenity}</div>
                        `).join('')}
                    </div>
                    <button class="book-button" onclick="bookTrain(${train.number})" id="book-${train.number}" disabled>
                        Select Class First
                    </button>
                </div>
            `;
            
            return card;
        }

        function selectClass(trainNumber, classCode) {
            selectedTrainClass = { trainNumber, classCode };
            
            // Reset all class selections for this train
            const classCards = document.querySelectorAll(`#classes-${trainNumber} .class-card`);
            classCards.forEach(card => {
                card.classList.remove('selected');
            });
            
            // Mark selected class
            const selectedCard = document.querySelector(`#classes-${trainNumber} .class-card:nth-child(${Array.from(classCards).findIndex(card => card.querySelector('.class-name').textContent.includes(classDetails[classCode].name)) + 1})`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // Enable book button
            const bookButton = document.getElementById(`book-${trainNumber}`);
            if (bookButton) {
                bookButton.disabled = false;
                bookButton.textContent = 'Book Now';
                bookButton.onclick = () => bookTrain(trainNumber, classCode);
            }
        }

        function bookTrain(trainNumber, classCode) {
            const fromStation = document.getElementById('fromStation').value;
            const toStation = document.getElementById('toStation').value;
            const date = document.getElementById('date').value;
            const quota = document.getElementById('quota').value;
            const passengers = document.getElementById('passengers').value;
            
            const classDetail = classDetails[classCode];
            
            alert(`üé´ Ticket Booking Confirmed!\n\n` +
                  `Train #${trainNumber}\n` +
                  `Route: ${fromStation.split('(')[0]} ‚Üí ${toStation.split('(')[0]}\n` +
                  `Date: ${new Date(date).toDateString()}\n` +
                  `Class: ${classDetail.name}\n` +
                  `Quota: ${quota}\n` +
                  `Passengers: ${passengers}\n\n` +
                  `Please proceed to payment.`);
        }

        // Initialize date to today
        document.getElementById('date').valueAsDate = new Date();
        document.getElementById('date').min = new Date().toISOString().split('T')[0];
        
        // Set max date to 120 days from now (as per Indian Railways)
        const maxDate = new Date();
        maxDate.setDate(maxDate.getDate() + 120);
        document.getElementById('date').max = maxDate.toISOString().split('T')[0];
    </script>
</body>
</html>